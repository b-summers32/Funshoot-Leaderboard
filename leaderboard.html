<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Editable Funshoot Leaderboard</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; }
        .modal-backdrop {
            background-color: rgba(0, 0, 0, 0.5);
        }
    </style>
</head>
<body class="bg-gray-100 text-gray-800">

    <div class="container mx-auto p-4 sm:p-6 lg:p-8">
        <div class="bg-white rounded-2xl shadow-lg p-6 md:p-8 max-w-4xl mx-auto">
            
            <header class="text-center mb-8">
                <h1 class="text-3xl sm:text-4xl font-bold text-gray-900">Editable Funshoot Leaderboard</h1>
                <p class="text-gray-500 mt-2">Add, edit, and remove contestants directly. Data saves in your browser.</p>
            </header>

            <!-- Add Contestant Form -->
            <div class="bg-gray-50 p-6 rounded-xl mb-8">
                <h2 class="text-xl font-bold mb-4 text-gray-800">Add New Contestant</h2>
                <form id="add-form" class="grid sm:grid-cols-3 gap-4">
                    <input type="text" id="add-name" placeholder="Contestant Name" class="col-span-3 sm:col-span-1 shadow-sm border rounded-lg w-full py-3 px-4 focus:outline-none focus:ring-2 focus:ring-blue-500" required>
                    <input type="text" id="add-time" placeholder="Time (e.g., 01:23.45)" class="shadow-sm border rounded-lg w-full py-3 px-4 focus:outline-none focus:ring-2 focus:ring-blue-500" required>
                    <input type="number" id="add-score" placeholder="Score" class="shadow-sm border rounded-lg w-full py-3 px-4 focus:outline-none focus:ring-2 focus:ring-blue-500" required>
                    <button type="submit" class="col-span-3 bg-blue-500 hover:bg-blue-600 text-white font-bold py-3 px-6 rounded-lg transition-colors">Add Contestant</button>
                </form>
            </div>
            
            <!-- Leaderboard Table -->
            <div id="leaderboard-container" class="overflow-x-auto">
                <table class="min-w-full bg-white rounded-lg">
                    <thead class="bg-gray-200">
                        <tr>
                            <th class="p-3 text-sm font-semibold tracking-wide text-left rounded-tl-lg">Rank</th>
                            <th class="p-3 text-sm font-semibold tracking-wide text-left">Contestant</th>
                            <th class="p-3 text-sm font-semibold tracking-wide text-left">Time</th>
                            <th class="p-3 text-sm font-semibold tracking-wide text-left">Score</th>
                            <th class="p-3 text-sm font-semibold tracking-wide text-center rounded-tr-lg">Actions</th>
                        </tr>
                    </thead>
                    <tbody id="leaderboard-body" class="divide-y divide-gray-200">
                        <!-- Dynamic content will be inserted here -->
                    </tbody>
                </table>
            </div>
        </div>
    </div>
    
    <!-- Edit Modal -->
    <div id="edit-modal" class="fixed inset-0 z-50 flex items-center justify-center hidden modal-backdrop">
        <div class="bg-white rounded-2xl shadow-lg p-8 max-w-md w-full m-4">
            <h2 class="text-2xl font-bold mb-6">Edit Contestant</h2>
            <form id="edit-form">
                <input type="hidden" id="edit-id">
                <div class="mb-4">
                    <label for="edit-name" class="block text-gray-700 text-sm font-bold mb-2">Name</label>
                    <input type="text" id="edit-name" class="shadow-sm border rounded-lg w-full py-3 px-4 focus:outline-none focus:ring-2 focus:ring-blue-500" required>
                </div>
                 <div class="mb-4">
                    <label for="edit-time" class="block text-gray-700 text-sm font-bold mb-2">Time</label>
                    <input type="text" id="edit-time" class="shadow-sm border rounded-lg w-full py-3 px-4 focus:outline-none focus:ring-2 focus:ring-blue-500" required>
                </div>
                <div class="mb-6">
                    <label for="edit-score" class="block text-gray-700 text-sm font-bold mb-2">Score</label>
                    <input type="number" id="edit-score" class="shadow-sm border rounded-lg w-full py-3 px-4 focus:outline-none focus:ring-2 focus:ring-blue-500" required>
                </div>
                <div class="flex items-center justify-end gap-4">
                    <button type="button" id="cancel-edit" class="bg-gray-200 hover:bg-gray-300 text-gray-800 font-bold py-2 px-4 rounded-lg">Cancel</button>
                    <button type="submit" class="bg-green-500 hover:bg-green-600 text-white font-bold py-2 px-4 rounded-lg">Save Changes</button>
                </div>
            </form>
        </div>
    </div>


    <script>
        const addForm = document.getElementById('add-form');
        const leaderboardBody = document.getElementById('leaderboard-body');
        const editModal = document.getElementById('edit-modal');
        const editForm = document.getElementById('edit-form');
        const cancelEditBtn = document.getElementById('cancel-edit');

        let contestants = [];
        let nextId = 1;

        // --- DATA MANAGEMENT ---
        function loadData() {
            const savedContestants = localStorage.getItem('funshootLeaderboard');
            const savedNextId = localStorage.getItem('funshootNextId');
            if (savedContestants) {
                contestants = JSON.parse(savedContestants);
            }
            if (savedNextId) {
                nextId = parseInt(savedNextId, 10);
            }
            renderLeaderboard();
        }

        function saveData() {
            localStorage.setItem('funshootLeaderboard', JSON.stringify(contestants));
            localStorage.setItem('funshootNextId', nextId.toString());
        }

        // --- LEADERBOARD RENDERING ---
        function renderLeaderboard() {
            // Sort by score (highest first)
            const sortedContestants = [...contestants].sort((a, b) => b.score - a.score);
            
            leaderboardBody.innerHTML = ''; // Clear table

            if (sortedContestants.length === 0) {
                leaderboardBody.innerHTML = `<tr><td colspan="5" class="text-center p-4 text-gray-500">No contestants yet. Add one above!</td></tr>`;
                return;
            }

            sortedContestants.forEach((player, index) => {
                const row = document.createElement('tr');
                let rankDisplay;
                switch(index) {
                    case 0: rankDisplay = '&#129351;'; break; // 1st
                    case 1: rankDisplay = '&#129352;'; break; // 2nd
                    case 2: rankDisplay = '&#129353;'; break; // 3rd
                    default: rankDisplay = index + 1;
                }

                row.innerHTML = `
                    <td class="p-3 text-lg font-bold text-center w-16">${rankDisplay}</td>
                    <td class="p-3 text-gray-700 font-medium">${player.name}</td>
                    <td class="p-3 text-gray-700">${player.time}</td>
                    <td class="p-3 text-gray-900 font-bold">${player.score}</td>
                    <td class="p-3 text-center">
                        <button class="edit-btn bg-yellow-400 hover:bg-yellow-500 text-white text-sm font-bold py-1 px-3 rounded" data-id="${player.id}">Edit</button>
                        <button class="delete-btn bg-red-500 hover:bg-red-600 text-white text-sm font-bold py-1 px-3 rounded ml-2" data-id="${player.id}">Delete</button>
                    </td>
                `;
                leaderboardBody.appendChild(row);
            });
        }

        // --- EVENT LISTENERS ---

        // Add a new contestant
        addForm.addEventListener('submit', (e) => {
            e.preventDefault();
            const name = document.getElementById('add-name').value;
            const time = document.getElementById('add-time').value;
            const score = parseInt(document.getElementById('add-score').value, 10);

            if (name && time && !isNaN(score)) {
                contestants.push({ id: nextId++, name, time, score });
                saveData();
                renderLeaderboard();
                addForm.reset();
            }
        });

        // Handle clicks on Edit/Delete buttons
        leaderboardBody.addEventListener('click', (e) => {
            const id = parseInt(e.target.dataset.id, 10);
            
            if (e.target.classList.contains('delete-btn')) {
                // Confirm before deleting
                if (confirm('Are you sure you want to delete this contestant?')) {
                    contestants = contestants.filter(c => c.id !== id);
                    saveData();
                    renderLeaderboard();
                }
            }
            
            if (e.target.classList.contains('edit-btn')) {
                const contestant = contestants.find(c => c.id === id);
                if (contestant) {
                    document.getElementById('edit-id').value = contestant.id;
                    document.getElementById('edit-name').value = contestant.name;
                    document.getElementById('edit-time').value = contestant.time;
                    document.getElementById('edit-score').value = contestant.score;
                    editModal.classList.remove('hidden');
                }
            }
        });

        // Handle the edit form submission
        editForm.addEventListener('submit', (e) => {
            e.preventDefault();
            const id = parseInt(document.getElementById('edit-id').value, 10);
            const name = document.getElementById('edit-name').value;
            const time = document.getElementById('edit-time').value;
            const score = parseInt(document.getElementById('edit-score').value, 10);

            const contestantIndex = contestants.findIndex(c => c.id === id);
            if (contestantIndex !== -1 && name && time && !isNaN(score)) {
                contestants[contestantIndex] = { id, name, time, score };
                saveData();
                renderLeaderboard();
                editModal.classList.add('hidden');
            }
        });

        // Cancel editing
        cancelEditBtn.addEventListener('click', () => {
            editModal.classList.add('hidden');
        });

        // --- INITIAL LOAD ---
        document.addEventListener('DOMContentLoaded', loadData);
    </script>
</body>
</html>

